substitutions:
  name: xiaomi-philips-light

esphome:
  name: ${name}
  platform: ESP8266
  board: esp_wroom_02
  includes:
    - xiaomi_light.h

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:

logger:
  esp8266_store_log_strings_in_flash: false

output:
  - platform: esp8266_pwm
    pin: GPIO12
    id: output_cw
  - platform: esp8266_pwm
    pin: GPIO15
    id: output_ww

light:
  - platform: custom
    lambda: |-
      auto light_out = new XiaomiLight(id(output_cw),id(output_ww));
      App.register_component(light_out);
      return {light_out};
    lights:
      - name: ${name}
        id: bulb
        gamma_correct: 0
        default_transition_length: 350ms

sensor:
  - platform: ntc
    name: "${name} ntc temperature"
    sensor: resistance0
    calibration:
      b_constant: 3950
      reference_temperature: 25Â°C
      reference_resistance: 100000

  - platform: resistance
    name: "${name} resistance"
    id: resistance0
    internal: true
    sensor: adc0
    configuration: DOWNSTREAM
    resistor: 500000
    reference_voltage: 3.3

  - platform: adc
    name: "${name} adc"
    id: adc0
    internal: true
    pin: A0
    update_interval: 60s
    filters:
      - median:
          window_size: 3
          send_every: 1
          send_first_at: 1
